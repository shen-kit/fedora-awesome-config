"use strict";(self.webpackChunkwhale_ext=self.webpackChunkwhale_ext||[]).push([["src_popup_components_Recommendation_js"],{55771:
/*!************************************************************!*\
  !*** ./src/popup/components/Recommendation.js + 1 modules ***!
  \************************************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>j});var r=n(63038),o=n.n(r),i=n(59713),a=n.n(i),l=n(45697),c=n(67294),u=n(65858),s=n(63535),d=n(77959),p=n(20374),f=n(23588),m=n(20136),h=n(64616),g=n(22314),b=(0,f.ZP)(m.z4).withConfig({displayName:"RecommendationSkeleton__Container",componentId:"o060f6-0"})(["&&{height:497px;width:360px;}"]);const x=function(){return c.createElement(b,null,c.createElement(m.z4,{style:{padding:"0 12px"}},c.createElement(m.NH,{height:"21px"}),c.createElement(h.O,{width:"107px",height:"16px"})),c.createElement(m.NH,{height:"14px"}),c.createElement(g.Z,null))};var v=n(7781),y=n(62620),w=n(91227),k=n(18855),_=n(43541),C=n(71174),E=n(98666),O=n(34267),I=n(26846),S=n(45786),P=n(63753);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(e){var t=e.selfTabIndex,n=e.selfContentIndex,r=(0,u.I0)(),i=(0,C.Z)(),a=(0,u.v9)(I.kS),l=(0,O.Z)(a),f=(0,u.v9)(I.BD),m=(0,_.O)(),h=(0,s.Z)(t,n),g=(0,d._l)(),b=(0,u.v9)(S.jl);(0,c.useEffect)((function(){a||r({type:w.Dc})}),[i]);var Z=(0,p.Z)(),N=(0,c.useCallback)((function(e,t){g(M(M({},Z),{},{affiliate_link_id:(null==e?void 0:e.affiliatedId)||null,ui_element_name:"recommended_for_you",feature_name:"recommended_for_you",feature_type:"merchant",feature_position:t+1,merchant_id:(null==e?void 0:e.merchantId)||null,merchant_name:(null==e?void 0:e.name)||null}))}),[g,Z]),j=b?y.Pnd:y.Mfi,T=(0,c.useState)(!1),D=o()(T,2),A=D[0],R=D[1];return(0,c.useEffect)((function(){l&&!a&&R(!0)}),[l,a]),(0,E.Z)(m,{shouldDisplayIn:k.Gy.NON_MERCHANT}).shouldDisplay?0===f.length&&A?null:c.createElement(v.Z,{ref:h},a&&0===f.length?c.createElement(x,null):c.createElement(c.Fragment,null,c.createElement(v.T,{title:browser.i18n.getMessage("recommendation_title")}),c.createElement(P.Z,{merchants:f,onStoreClick:N,utm:j}))):null};N.propTypes={selfTabIndex:l.number,selfContentIndex:l.number},N.defaultProps={selfTabIndex:0,selfContentIndex:0};const j=N},63753:
/*!********************************************!*\
  !*** ./src/popup/components/StoresList.js ***!
  \********************************************/(e,t,n)=>{n.d(t,{Z:()=>C});var r=n(/*! prop-types */45697),o=n(/*! react */67294),i=n(/*! react-redux */65858),a=n(/*! styled-components */23588),l=n(/*! ../../shared/components/CountdownTimer */25723),c=n(/*! ../../shared/components/CountdownTimer/useCountdownTimer */98496),u=n(/*! ../../shared/components/Experiment/MerchantOffExperimentWrapper */31732),s=n(/*! ../../shared/contexts/tabId */6256),d=n(/*! ../../shared/selectors/cc */49485),p=n(/*! ../../shared/selectors/merchant */96965),f=n(/*! ../../shared/selectors/user */45786),m=n(/*! ../../shared/styledComponents */20136),h=n(/*! ../../shared/utils/activation */91228),g=a.ZP.div.withConfig({displayName:"StoresList__Container",componentId:"ok71ht-0"})(["&&{width:360px;flex:1 0 auto;overflow:auto;overflow-x:hidden;min-height:394px;padding-top:6px;}&&::-webkit-scrollbar{width:8px;background-color:#e2e2e2;}&&::-webkit-scrollbar-thumb{background-color:rgba(90,98,116,0.5);border-radius:4px;}&& table{margin-bottom:20px;}&& ul{list-style:none;font-size:12px;padding:0px;margin:0px;height:100%;outline:none;}&& ul li{padding:8px;color:#777;font-weight:normal;font-size:12px;border-bottom:1px solid #eee;cursor:pointer;}&& ul li:last-child{border:0;}"]),b=a.ZP.div.withConfig({displayName:"StoresList__Item",componentId:"ok71ht-1"})(["&&{position:relative;cursor:pointer;width:162px;height:93px;margin:0 0 12px 12px;float:left;display:flex;flex-direction:column;background:#ffffff;border-radius:8px;border:1px solid #f7f7f8;align-items:center;}"]),x=a.ZP.div.withConfig({displayName:"StoresList__Logo",componentId:"ok71ht-2"})(["&&{height:30px;width:87.5px;background-color:#fff;background-position:center;background-repeat:no-repeat;background-size:contain;border:none;margin-top:12px;}"]),v=a.ZP.div.withConfig({displayName:"StoresList__CashbackContainer",componentId:"ok71ht-3"})(["&&{display:flex;flex-direction:column;align-items:center;justify-content:center;margin-top:",";margin-bottom:12px;}&&:hover{color:#f00;}"],(function(e){return e.shouldShowOld?"4px":"13px"})),y=(0,a.ZP)(m.xv).withConfig({displayName:"StoresList__LatestCashbackAmount",componentId:"ok71ht-4"})(["&&{display:flex;align-items:flex-end;font-family:-apple-system,BlinkMacSystemFont,sans-serif !important;font-size:14px;line-height:17px;color:#212836;}"]),w=(0,a.ZP)(m.xv).withConfig({displayName:"StoresList__CashbackText",componentId:"ok71ht-5"})(["&&{display:flex;margin-left:4px;font-family:-apple-system,BlinkMacSystemFont,sans-serif !important;font-weight:500;font-size:12px;line-height:14px;color:#6b7280;}"]),k=(0,a.ZP)(w).withConfig({displayName:"StoresList__OldCashback",componentId:"ok71ht-6"})(["&&{display:flex;margin-top:4px;font-weight:normal;color:#a7abb4;}"]),_=function(e){var t,n=e.merchants,r=e.utm,a=e.onStoreClick,m=(0,i.v9)(d.q),w=(0,s.z)(),_=(0,i.v9)((function(e){return(0,f.jl)(e)})),C=(0,o.useMemo)((function(){return n.map((function(e){var t;return Date.parse(null==e||null===(t=e.cashback)||void 0===t?void 0:t.activeTo)}))}),[n]),E=(0,c.Z)(C),O=(0,o.useCallback)((function(e,t){return(0,p.EP)(e)&&E[t]>0}),[E]),I=(0,o.useCallback)((function(e,t){a(e,t),(0,h.xc)({merchant:e,isLoggedIn:_,utmMedium:r,isNewTab:!0,cc:m})}),[m,_,a,r]),S=(0,o.useCallback)((function(e,t){return E[t]>0?o.createElement(y,null,null==e?void 0:e.cashbackAmount):o.createElement(y,null,e.oldCashbackAmount||(null==e?void 0:e.cashbackAmount))}),[E]);return o.createElement(g,null,null===(t=n.map)||void 0===t?void 0:t.call(n,(function(e,t){var n,r,i,c=O(e,t),s=null!==(n=null==e?void 0:e.compliancePopupEnabled)&&void 0!==n&&n;return o.createElement(u.Z,{merchant:e,key:null==e?void 0:e.merchantId,disableInAllStatus:!0},o.createElement(b,{key:null==e?void 0:e.merchantId,onClick:function(){s?function(e,t){var n=e.sbWebMerchantUrl;a(e,t),browser.tabs.update(w,{url:n})}(e,t):I(e,t)}},o.createElement(x,{style:{backgroundImage:"url('".concat(e.logoUrl,"')")},title:e.name}),o.createElement(v,{shouldShowOld:c},S(e,t),c&&o.createElement(o.Fragment,null,o.createElement(k,null,null==e||null===(r=e.oldCashback)||void 0===r?void 0:r.description),o.createElement(l.Z,{remainingTime:E[t],activeTo:null==e||null===(i=e.cashback)||void 0===i?void 0:i.activeTo,customStyle:{position:"absolute",borderRadius:"10px 10px 10px 0",left:0,top:"-4px"}})))))})))};_.propTypes={merchants:r.array.isRequired,utm:r.string,onStoreClick:r.func},_.defaultProps={utm:"",onStoreClick:null};const C=_},25723:
/*!*******************************************************!*\
  !*** ./src/shared/components/CountdownTimer/index.js ***!
  \*******************************************************/(e,t,n)=>{n.d(t,{Z:()=>y});var r=n(/*! @babel/runtime/helpers/defineProperty */59713),o=n.n(r),i=n(/*! @babel/runtime/helpers/slicedToArray */63038),a=n.n(i),l=n(/*! lodash/isEmpty */41609),c=n.n(l),u=n(/*! prop-types */45697),s=n(/*! react */67294),d=n(/*! styled-components */23588),p=n(/*! ../../styledComponents */20136);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={color:"#cf3030"},g={color:"#794D24"},b={color:"#404859"},x=(0,d.ZP)(p.xv).withConfig({displayName:"CountdownTimer__Container",componentId:"sc-1vxvtph-0"})(["&&{padding:2px 8px;border-radius:10px;font-weight:bold;font-size:10px;line-height:12px;}"]),v=function(e){var t=e.activeTo,n=e.customStyle,r=e.remainingTime,o=(0,s.useState)(null),i=a()(o,2),l=i[0],u=i[1],d=(0,s.useState)({}),p=a()(d,2),f=p[0],v=p[1],y=(0,s.useCallback)((function(){if(r<=0)return{};var e=Math.floor(r/1e3%60),n=Math.floor(r/6e4%60),o=Math.floor(r/36e5%24),i=Math.floor(r/864e5),a=new Date(t);return{formattedDate:"".concat(a.toLocaleDateString("en-SG",{month:"long",day:"2-digit"}),", ").concat(a.getFullYear()),days:i,hours:o,minutes:n,seconds:e}}),[t,r]),w=(0,s.useCallback)((function(){if(!(r<=0)){var e=y(),t=e.days,n=e.hours,o=e.minutes,i=e.seconds,a=e.formattedDate;return 0===t&&0===n?(v(h),59===o&&i>0?void u(browser.i18n.getMessage("ends_in_x_hours","1")):59===o&&0===i?void u(browser.i18n.getMessage("ends_in_x_minutes","".concat(o))):void u(browser.i18n.getMessage("ends_in_x_minutes","".concat(o+1)))):0===t&&n>=1?(u(browser.i18n.getMessage("ends_in_x_hours","".concat(n))),void v(h)):t>=1&&t<=7?(u(browser.i18n.getMessage("ends_in_x_days","".concat(t))),void v(g)):void(t>7&&(u(browser.i18n.getMessage("ends_on_x",a)),v(b)))}}),[y,r]);return(0,s.useEffect)((function(){w()}),[w]),c()(t)||c()(l)||r<=0?null:s.createElement(x,{style:m(m({},f),n)},l)};v.propTypes={customStyle:u.object,activeTo:u.string,remainingTime:u.number},v.defaultProps={customStyle:null,activeTo:null,remainingTime:0};const y=v},98496:
/*!*******************************************************************!*\
  !*** ./src/shared/components/CountdownTimer/useCountdownTimer.js ***!
  \*******************************************************************/(e,t,n)=>{n.d(t,{Z:()=>p});var r=n(/*! @babel/runtime/helpers/slicedToArray */63038),o=n.n(r),i=n(/*! lodash/isArray */1469),a=n.n(i),l=n(/*! lodash/isEmpty */41609),c=n.n(l),u=n(/*! lodash/isFunction */23560),s=n.n(u),d=n(/*! react */67294);const p=function(e,t){if(!a()(e))throw new Error("endTimes should be array, instead of ".concat(e));var n=(0,d.useState)([]),r=o()(n,2),i=r[0],l=r[1],u=(0,d.useMemo)((function(){return!c()(e)&&e.some((function(e){return e>Date.now()}))}),[e]),p=(0,d.useRef)(),f=(0,d.useCallback)((function(){var n=e.map((function(e){return e?e<0?e:e-Date.now():1}));l(n),n.every((function(e){return e<0}))&&clearInterval(p.current),s()(t)&&t(n.map((function(e,t){return e<=0?t:null})).filter((function(e){return null!==e})))}),[t,e]);return(0,d.useEffect)((function(){return f(),u&&(p.current=setInterval(f,1e3)),function(){return clearInterval(p.current)}}),[u,f]),i}},31732:
/*!**************************************************************************!*\
  !*** ./src/shared/components/Experiment/MerchantOffExperimentWrapper.js ***!
  \**************************************************************************/(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(/*! react-redux */65858),o=n(/*! ../../selectors/activation */83582),i=n(/*! ../../selectors/experiments */6688);const a=function(e){var t=e.children,n=e.merchant,a=e.disableInAllStatus,l=void 0!==a&&a,c=(0,r.v9)((function(e){return(0,i.Zb)(e,{merchantId:null==n?void 0:n.merchantId})})),u=(0,r.v9)((function(e){return(0,o.GM)(e,{merchant:n})||(0,o.tm)(e,{merchant:n})}));return c&&l||c&&!u?null:t}},22314:
/*!*********************************************************************************!*\
  !*** ./src/shared/components/Skeletons/StoresListSkeleton/index.js + 1 modules ***!
  \*********************************************************************************/(e,t,n)=>{n.d(t,{Z:()=>f});var r=n(319),o=n.n(r),i=n(67294),a=n(23588),l=n(20136),c=n(64616),u=(0,a.ZP)(l.AE).withConfig({displayName:"MerchantItemSkeleton__Container",componentId:"sc-1v8aawt-0"})(["&&{position:relative;cursor:pointer;width:162px;height:75px;margin:0 0 12px 12px;float:left;display:flex;flex-direction:column;background:#ffffff;box-shadow:0px 4px 16px rgba(64,72,90,0.1);border-radius:8px;align-items:center;}"]);const s=function(){return i.createElement(u,null,i.createElement(c.O,{width:"87.5px",height:"30px",margin:"0 auto",borderRadius:"3px"}),i.createElement(l.NH,{height:"9px"}),i.createElement(c.O,{width:"122px",height:"12px",margin:"0 auto",borderRadius:"3px"}))};var d=a.ZP.div.withConfig({displayName:"StoresListSkeleton__Container",componentId:"c7t8bh-0"})(["&&{flex:1 0 auto;overflow:auto;overflow-x:hidden;min-height:394px;max-width:360px;}&&::-webkit-scrollbar{width:8px;background-color:#e2e2e2;}&&::-webkit-scrollbar-thumb{background-color:rgba(90,98,116,0.5);border-radius:4px;}&& table{margin-bottom:20px;}&& ul{list-style:none;font-size:12px;padding:0px;margin:0px;height:100%;outline:none;}&& ul li{padding:8px;color:#777;font-weight:normal;font-size:12px;border-bottom:1px solid #eee;cursor:pointer;}&& ul li:last-child{border:0;}"]),p=o()(Array(10).keys());const f=function(){return i.createElement(d,null,p.map((function(e){return i.createElement(s,{key:e})})))}},71174:
/*!****************************************!*\
  !*** ./src/shared/hooks/useCountry.js ***!
  \****************************************/(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(/*! react-redux */65858),o=n(/*! ../selectors/cc */49485);const i=function(){return(0,r.v9)((function(e){return(0,o.q)(e)}))}},98666:
/*!******************************************************!*\
  !*** ./src/shared/hooks/useMerchantOffExperiment.js ***!
  \******************************************************/(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(/*! react-redux */65858),o=n(/*! ../constants/tabs */18855),i=n(/*! ../selectors/activation */83582),a=n(/*! ../selectors/experiments */6688);const l=function(e,t){var n,l=t.shouldDisplayIn,c=null!==(n=null==e?void 0:e.merchantId)&&void 0!==n?n:null,u=(0,r.v9)((function(e){return(0,a.Zb)(e,{merchantId:c})})),s=(0,r.v9)((function(e){return(0,a.vb)(e,{merchantId:c})}));return(0,r.v9)((function(t){return(0,i.tm)(t,{merchant:e})||(0,i.GM)(t,{merchant:e})}))?l===o.Gy.MERCHANT:u?s?{isMerchantInExperiment:!0,shouldDisplay:l===o.Gy.MERCHANT}:{isMerchantInExperiment:!0,shouldDisplay:l===o.Gy.NON_MERCHANT}:e?{isMerchantInExperiment:!1,shouldDisplay:l===o.Gy.MERCHANT}:{isMerchantInExperiment:!1,shouldDisplay:l===o.Gy.NON_MERCHANT}}},64616:
/*!*************************************************!*\
  !*** ./src/shared/styledComponents/Skeleton.js ***!
  \*************************************************/(e,t,n)=>{n.d(t,{O:()=>i,L:()=>a});var r=n(/*! styled-components */23588),o=(0,r.F4)(["0%{transform:translateX(-100%);}60%{transform:translateX(100%);}100%{transform:translateX(100%);}"]),i=r.ZP.div.withConfig({displayName:"Skeleton",componentId:"edinct-0"})(["&&{width:",";height:",";margin:",";border-radius:",";display:",";background:linear-gradient(90deg,#efefef,transparent);overflow:hidden;}&&:after{width:",";height:",";content:'';animation:"," 1.5s linear 0.5s infinite;background:linear-gradient(90deg,transparent,#f5f5f5,transparent);}"],(function(e){return e.width||"auto"}),(function(e){return e.height}),(function(e){return e.margin}),(function(e){return e.borderRadius||"3px"}),(function(e){return e.display||"flex"}),(function(e){return e.width||"auto"}),(function(e){return e.height}),o),a=(0,r.ZP)(i).withConfig({displayName:"Skeleton__CircleSkeleton",componentId:"edinct-1"})(["&&{border-radius:50%;}"])}}]);