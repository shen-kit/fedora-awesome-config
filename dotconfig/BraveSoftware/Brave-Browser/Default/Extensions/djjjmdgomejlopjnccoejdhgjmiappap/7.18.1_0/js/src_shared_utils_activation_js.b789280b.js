"use strict";(self.webpackChunkwhale_ext=self.webpackChunkwhale_ext||[]).push([["src_shared_utils_activation_js"],{91228:
/*!****************************************************!*\
  !*** ./src/shared/utils/activation.js + 2 modules ***!
  \****************************************************/(e,t,s)=>{s.d(t,{xc:()=>h,GQ:()=>m,le:()=>l});s(50008),s(63038),s(48926);var n=s(34575),i=s.n(n),o=s(93913),r=s.n(o),u=s(44340),a=[u.C4.EXT_OPEN_MENU,u.C4.EXT_VIEW_MERCHANT_PAGE,u.C4.EXT_PROMPT_NOTIFIER_COMPARISON],c=function(e){var t=Math.floor(Date.now()/1e3);return{sessionId:e?e+t.toString():function(e){if(void 0!==e&&"number"==typeof e){for(var t="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n="abcdefghijklmnopqrstuvwxyz",i=0;i<e-1;i++)t+=s.charAt(36*Math.random()%36);return t+n.charAt(26*Math.random()%26)}}(6)+t.toString(),createdAt:t}};new(function(){function e(){i()(this,e),this.sessionId=null,this.createdAt=-1,this.sessionTimeout=300}return r()(e,[{key:"checkAndGetSessionId",value:function(e,t){return!this.sessionId||this.isSessionExpired()?function(e){return a.includes(e)}(e)?(this.renew(t),this.sessionId):(this.revoke(),this.sessionId):(this.refresh(),this.sessionId)}},{key:"setTimeout",value:function(e){this.sessionTimeout=e}},{key:"renew",value:function(e){var t=c(e),s=t.sessionId,n=t.createdAt;this.sessionId=s,this.createdAt=n}},{key:"refresh",value:function(){this.createdAt=Math.floor(Date.now()/1e3)}},{key:"revoke",value:function(){this.sessionId=null,this.createdAt=-1}},{key:"isSessionExpired",value:function(){return Math.floor(Date.now()/1e3)-this.createdAt>this.sessionTimeout}},{key:"debug",value:function(){console.log("sessionId",this.sessionId),console.log("createAt",this.createdAt),console.log("sessionTimeout",this.sessionTimeout)}}]),e}());s(11713),s(62620);var d=s(92671);s(51693),s(45786),s(4536);var h=function(e){var t=e.merchant,s=e.utmMedium,n=e.cc,i=e.deeplink,o=e.isLoggedIn,r=e.isNewTab,u=e.unfocusedActivation;browser.runtime.sendMessage({merchant:t,utmMedium:s,cc:n,deeplink:i,isLoggedIn:o,isNewTab:r,unfocusedActivation:u,action:d.Dy})},l=function(e){var t=e.tabId,s=e.productId,n=e.merchant,i=e.utmMedium,o=e.cc,r=e.isLoggedIn;browser.runtime.sendMessage({tabId:t,productId:s,merchant:n,utmMedium:i,cc:o,isLoggedIn:r,action:d.s0})},m=function(e){var t=e.targetUrl,s=e.deeplink,n=e.merchantId,i=e.utmMedium;browser.runtime.sendMessage({targetUrl:t,deeplink:s,merchantId:n,utmMedium:i,action:d.Zn})}}}]);