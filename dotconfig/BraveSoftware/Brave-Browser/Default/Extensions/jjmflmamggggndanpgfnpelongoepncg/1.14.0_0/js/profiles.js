document.addEventListener("DOMContentLoaded",function(){vm=new function(){var t=this;t.ext=new ExtensionCollectionModel,t.profiles=new ProfileCollectionModel,t.current_profile=ko.observable(),t.add_name=ko.observable(""),t.current_name=ko.pureComputed(function(){return t.current_profile()?t.current_profile().name():null}),t.editable=ko.computed(function(){return t.current_profile()||!1}),t.select=function(e){t.current_profile(e)},t.selectAlwaysOn=function(e){t.selectReserved(e,"always_on")},t.selectFavorites=function(e){t.selectReserved(e,"favorites")},t.selectReserved=function(e,n){t.add_name("__"+n),t.add()},t.selectByIndex=function(e){t.current_profile(t.profiles.items()[e])},t.add=function(){var e,n=t.add_name(),o=t.ext.enabled.pluck();n&&((e=t.profiles.find(n))?t.current_profile(e):(t.profiles.add(n,o.slice()),t.selectByIndex(t.profiles.items().length-1)),t.add_name(""))},t.remove=function(e){var n=e==t.current_profile();confirm("Are you sure you want to remove this profile?")&&(t.profiles.remove(e),n)&&t.selectByIndex(0)},t.save=function(){t.profiles.save(function(){fadeOutMessage("save-result")})},t.close=function(){window.close()},t.toggleAll=function(){var e=_(t.ext.extensions()).map(function(e){return e.id()});t.current_profile().items(e)},t.toggleNone=function(){t.current_profile()&&t.current_profile().items([])};try{(new DismissalsCollection).dismiss("profile_page_viewed"),t.selectByIndex(0)}catch(e){}},ko.bindingProvider.instance=new ko.secureBindingsProvider({}),ko.applyBindings(vm,document.getElementById("profiles"))});
