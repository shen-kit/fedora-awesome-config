document.addEventListener("DOMContentLoaded",function(){vm=new function(){var r=this;r.ext=new ExtensionCollectionModel,r.profiles=new ProfileCollectionModel,r.current_profile=ko.observable(),r.add_name=ko.observable(""),r.current_name=ko.pureComputed(function(){return r.current_profile()?r.current_profile().name():null}),r.editable=ko.computed(function(){return r.current_profile()||!1}),r.select=function(e){r.current_profile(e)},r.selectAlwaysOn=function(e){r.selectReserved(e,"always_on")},r.selectReserved=function(e,n){r.add_name("__"+n),r.add()},r.selectByIndex=function(e){r.current_profile(r.profiles.items()[e])},r.add=function(){var e,n=r.add_name(),o=r.ext.enabled.pluck();n&&((e=r.profiles.find(n))?r.current_profile(e):(r.profiles.add(n,o.slice()),r.selectByIndex(r.profiles.items().length-1)),r.add_name(""))},r.remove=function(e){var n=e==r.current_profile();confirm("Are you sure you want to remove this profile?")&&(r.profiles.remove(e),n&&r.selectByIndex(0))},r.save=function(){r.profiles.save(function(){fadeOutMessage("save-result")})},r.close=function(){window.close()},r.toggleAll=function(){var e=_(r.ext.extensions()).map(function(e){return e.id()});r.current_profile().items(e)},r.toggleNone=function(){r.current_profile()&&r.current_profile().items([])};try{(new DismissalsCollection).dismiss("profile_page_viewed"),r.selectByIndex(0)}catch(e){}},ko.bindingProvider.instance=new ko.secureBindingsProvider({}),ko.applyBindings(vm,document.getElementById("profiles"))});
