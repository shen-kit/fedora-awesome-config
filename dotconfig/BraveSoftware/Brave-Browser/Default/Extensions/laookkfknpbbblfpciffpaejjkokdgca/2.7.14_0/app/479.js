(globalThis.webpackChunkmomentum=globalThis.webpackChunkmomentum||[]).push([[479],{8552:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={inserted:function(e,t){var s;if(!1===(null==t?void 0:t.value))return;const a=null==e||null===(s=e.value)||void 0===s?void 0:s.length;e.select(),(a||0===a)&&(e.setSelectionRange(a,a),e.scrollLeft=e.scrollWidth)}}},2466:(e,t,s)=>{(e.exports=s(23645)(!1)).push([e.id,"\n.typeahead[data-v-dd05e390] { width: 100%; background-color: transparent;\n}\n.input-wrapper[data-v-dd05e390] { display: flex;\n}\n.input-wrapper input[data-v-dd05e390] { flex-grow: 1;\n}\n.typeahead .dropdown-list[data-v-dd05e390] { padding: 0; display: block; background: var(--color-accent-highlight); border-radius: 0 0 var(--border-radius) var(--border-radius); box-shadow: none;\n}\n.typeahead ul[data-v-dd05e390] { padding: 6px 0;\n}\n.typeahead li[data-v-dd05e390] { max-width: none; padding: 4px 9px; opacity: 0.8; font-size: 0.875rem;\n}\n.typeahead .result[data-v-dd05e390] { cursor: pointer;\n}\n.typeahead .result[data-v-dd05e390]:hover { background: var(--hover-bg);\n}\n.typeahead .no-results[data-v-dd05e390], .typeahead .searching[data-v-dd05e390] { opacity: 0.6;\n}\n",""])},50479:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=function(){var e=this;return(0,e._self._c)("typeahead",{attrs:{value:e.inputValue,results:e.results,loading:e.loading,"no-results":e.noResults,type:e.type,placeholder:"Type a location"},on:{input:e.fetchResults,select:e.onSelect}},[e._t("default")],2)};a._withStripped=!0;var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"typeahead",class:{searching:e.resultsVisible}},[t("div",{staticClass:"input-wrapper"},[t("input",{directives:[{name:"soft-focus",rawName:"v-soft-focus"}],staticClass:"input",attrs:{type:"text",placeholder:e.placeholder,spellcheck:"false",autocomplete:"off","data-test":e.type+"-input"},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)},focus:function(e){return e.target.select()}}}),e._v(" "),e._t("default")],2),e._v(" "),e.resultsVisible?t("smooth-reflow",{staticClass:"dropdown-list",attrs:{nested:!0,"hide-overflow":!0}},[t("ul",{attrs:{"data-test":"typeahead-dropdown"}},[t("li",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"searching"},[e._v("Searching...")]),e._v(" "),e._l(e.results,(function(s,a){return t("li",{key:a,staticClass:"result",attrs:{"data-test":e.type+"-result"},on:{click:function(t){return e.$emit("select",s)}}},[t("span",{staticClass:"name"},[e._v(e._s(s.name))])])})),e._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:e.noResults,expression:"noResults"}],staticClass:"no-results",attrs:{"data-test":"not-found"}},[e._v("No "+e._s(e.type)+"s found.")])],2)]):e._e()],1)};n._withStripped=!0;var l=s(8552);const o={name:"Typeahead",components:{SmoothReflow:s(54578).default},directives:{softFocus:l.Z},props:{value:{type:String,default:""},type:{type:String,default:""},results:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},placeholder:{type:String,required:!0},noResults:{type:Boolean,default:!1}},computed:{resultsVisible(){return this.results.length||this.loading||this.noResults}}};s(98705);var i=s(51900);const r=(0,i.Z)(o,n,[],!1,null,"dd05e390",null).exports;var u=s(9669),d=s.n(u);const c={name:"LocationTypeahead",components:{Typeahead:r},props:{value:{type:Object,default:()=>({})},type:{type:String,default:"location"},beforeFetchResults:{type:Function,default:null}},data:()=>({results:[],inputValue:"",loading:!1,noResults:!1}),created(){this.value.name&&(this.inputValue=this.value.name)},methods:{async fetchResults(e){if(this.inputValue=e,e.length>2){var t;this.noResults=!1;const s=null===(t=this.beforeFetchResults)||void 0===t?void 0:t.call(this,e);if(s)this.results=s;else{this.loading=!0,this.cancelTokenSource&&this.cancelTokenSource.cancel(),this.cancelTokenSource=d().CancelToken.source();try{const{data:t}=await this.$xhr.get("/locations:search?input="+e,{cancelToken:this.cancelTokenSource.token});this.loading=!1,this.results=t,this.results.length||(this.noResults=!0)}catch(e){if(d().isCancel(e))return;console.error(e),this.loading=!1}}}else this.cancelTokenSource&&this.cancelTokenSource.cancel(),this.results=[],this.noResults=!1,this.loading=!1},onSelect(e){this.results=[],this.noResults=!1,this.$emit("input",e),this.inputValue=e.name}}},p=(0,i.Z)(c,a,[],!1,null,null,null).exports},98705:(e,t,s)=>{var a=s(2466);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,s(45346).Z)("753e9b10",a,!1,{ssrId:!0})}}]);